<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Factor_graph (stanc.Analysis_and_optimization.Factor_graph)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">stanc</a> &#x00BB; <a href="../index.html">Analysis_and_optimization</a> &#x00BB; Factor_graph</nav><h1>Module <code>Analysis_and_optimization.Factor_graph</code></h1></header><dl><dt class="spec type" id="type-factor"><a href="#type-factor" class="anchor"></a><code><span class="keyword">type</span> factor</code><code> = </code><table class="variant"><tr id="type-factor.TargetTerm" class="anchored"><td class="def constructor"><a href="#type-factor.TargetTerm" class="anchor"></a><code>| </code><code><span class="constructor">TargetTerm</span> <span class="keyword">of</span> <a href="../../Middle__Expr/Typed/index.html#type-t">Middle.Expr.Typed.t</a></code></td></tr><tr id="type-factor.Reject" class="anchored"><td class="def constructor"><a href="#type-factor.Reject" class="anchor"></a><code>| </code><code><span class="constructor">Reject</span></code></td></tr><tr id="type-factor.LPFunction" class="anchored"><td class="def constructor"><a href="#type-factor.LPFunction" class="anchor"></a><code>| </code><code><span class="constructor">LPFunction</span> <span class="keyword">of</span> string * <span><a href="../../Middle__Expr/Typed/index.html#type-t">Middle.Expr.Typed.t</a> list</span></code></td></tr></table></dt></dl><div><div class="spec include"><div class="doc"><dl><dt class="spec value" id="val-factor_of_sexp"><a href="#val-factor_of_sexp" class="anchor"></a><code><span class="keyword">val</span> factor_of_sexp : Ppx_sexp_conv_lib.Sexp.t <span>&#45;&gt;</span> <a href="index.html#type-factor">factor</a></code></dt><dt class="spec value" id="val-sexp_of_factor"><a href="#val-sexp_of_factor" class="anchor"></a><code><span class="keyword">val</span> sexp_of_factor : <a href="index.html#type-factor">factor</a> <span>&#45;&gt;</span> Ppx_sexp_conv_lib.Sexp.t</code></dt><dt class="spec value" id="val-hash_fold_factor"><a href="#val-hash_fold_factor" class="anchor"></a><code><span class="keyword">val</span> hash_fold_factor : Ppx_hash_lib.Std.Hash.state <span>&#45;&gt;</span> <a href="index.html#type-factor">factor</a> <span>&#45;&gt;</span> Ppx_hash_lib.Std.Hash.state</code></dt><dt class="spec value" id="val-hash_factor"><a href="#val-hash_factor" class="anchor"></a><code><span class="keyword">val</span> hash_factor : <a href="index.html#type-factor">factor</a> <span>&#45;&gt;</span> Ppx_hash_lib.Std.Hash.hash_value</code></dt><dt class="spec value" id="val-compare_factor"><a href="#val-compare_factor" class="anchor"></a><code><span class="keyword">val</span> compare_factor : <a href="index.html#type-factor">factor</a> <span>&#45;&gt;</span> <a href="index.html#type-factor">factor</a> <span>&#45;&gt;</span> int</code></dt></dl></div></div></div><dl><dt class="spec type" id="type-factor_graph"><a href="#type-factor_graph" class="anchor"></a><code><span class="keyword">type</span> factor_graph</code><code> = </code><code>{</code><table class="record"><tr id="type-factor_graph.factor_map" class="anchored"><td class="def field"><a href="#type-factor_graph.factor_map" class="anchor"></a><code>factor_map : <span><span>(<a href="index.html#type-factor">factor</a> * <a href="../Dataflow_types/index.html#type-label">Dataflow_types.label</a>, <span><a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a> Core_kernel.Set.Poly.t</span>)</span> Core_kernel.Map.Poly.t</span>;</code></td></tr><tr id="type-factor_graph.var_map" class="anchored"><td class="def field"><a href="#type-factor_graph.var_map" class="anchor"></a><code>var_map : <span><span>(<a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a>, <span><span>(<a href="index.html#type-factor">factor</a> * <a href="../Dataflow_types/index.html#type-label">Dataflow_types.label</a>)</span> Core_kernel.Set.Poly.t</span>)</span> Core_kernel.Map.Poly.t</span>;</code></td></tr></table><code>}</code></dt></dl><div><div class="spec include"><div class="doc"><dl><dt class="spec value" id="val-factor_graph_of_sexp"><a href="#val-factor_graph_of_sexp" class="anchor"></a><code><span class="keyword">val</span> factor_graph_of_sexp : Ppx_sexp_conv_lib.Sexp.t <span>&#45;&gt;</span> <a href="index.html#type-factor_graph">factor_graph</a></code></dt><dt class="spec value" id="val-sexp_of_factor_graph"><a href="#val-sexp_of_factor_graph" class="anchor"></a><code><span class="keyword">val</span> sexp_of_factor_graph : <a href="index.html#type-factor_graph">factor_graph</a> <span>&#45;&gt;</span> Ppx_sexp_conv_lib.Sexp.t</code></dt><dt class="spec value" id="val-compare_factor_graph"><a href="#val-compare_factor_graph" class="anchor"></a><code><span class="keyword">val</span> compare_factor_graph : <a href="index.html#type-factor_graph">factor_graph</a> <span>&#45;&gt;</span> <a href="index.html#type-factor_graph">factor_graph</a> <span>&#45;&gt;</span> int</code></dt></dl></div></div></div><dl><dt class="spec value" id="val-extract_factors_statement"><a href="#val-extract_factors_statement" class="anchor"></a><code><span class="keyword">val</span> extract_factors_statement : <span><span>(<a href="../../Middle__Expr/Typed/index.html#type-t">Middle.Expr.Typed.t</a>, <span class="type-var">'a</span>)</span> <a href="../../Middle__Stmt/Fixed/Pattern/index.html#type-t">Middle.Stmt.Fixed.Pattern.t</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-factor">factor</a> list</span></code></dt><dt class="spec value" id="val-extract_factors"><a href="#val-extract_factors" class="anchor"></a><code><span class="keyword">val</span> extract_factors : <span><span>(<span class="type-var">'a</span>, <span><span>(<a href="../../Middle__Expr/Typed/index.html#type-t">Middle.Expr.Typed.t</a>, <span class="type-var">'a</span>)</span> <a href="../../Middle__Stmt/Fixed/Pattern/index.html#type-t">Middle.Stmt.Fixed.Pattern.t</a></span> * <span class="type-var">'b</span>)</span> Core_kernel.Map.Poly.t</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * <a href="index.html#type-factor">factor</a>)</span> list</span></code></dt><dt class="spec value" id="val-factor_rhs"><a href="#val-factor_rhs" class="anchor"></a><code><span class="keyword">val</span> factor_rhs : <a href="index.html#type-factor">factor</a> <span>&#45;&gt;</span> <span><a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a> Core_kernel.Set.Poly.t</span></code></dt><dt class="spec value" id="val-factor_var_dependencies"><a href="#val-factor_var_dependencies" class="anchor"></a><code><span class="keyword">val</span> factor_var_dependencies : <span><span>(<a href="../Dataflow_types/index.html#type-label">Dataflow_types.label</a>, <span><span>(<a href="../../Middle__Expr/Typed/index.html#type-t">Middle.Expr.Typed.t</a>, <a href="../Dataflow_types/index.html#type-label">Dataflow_types.label</a>)</span> <a href="../../Middle__Stmt/Fixed/Pattern/index.html#type-t">Middle.Stmt.Fixed.Pattern.t</a></span> * <a href="../Dependence_analysis/index.html#type-node_dep_info">Dependence_analysis.node_dep_info</a>)</span> Core_kernel.Map.Poly.t</span> <span>&#45;&gt;</span> <span><a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a> Core_kernel.Set.Poly.t</span> <span>&#45;&gt;</span> <span>(<a href="../Dataflow_types/index.html#type-label">Dataflow_types.label</a> * <a href="index.html#type-factor">factor</a>)</span> <span>&#45;&gt;</span> <span><a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a> Core_kernel.Set.Poly.t</span></code></dt><dt class="spec value" id="val-build_adjacency_maps"><a href="#val-build_adjacency_maps" class="anchor"></a><code><span class="keyword">val</span> build_adjacency_maps : <span><span>(<a href="../Dataflow_types/index.html#type-label">Dataflow_types.label</a> * <a href="index.html#type-factor">factor</a> * <span><a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a> Core_kernel.Set.Poly.t</span>)</span> Core_kernel.List.t</span> <span>&#45;&gt;</span> <a href="index.html#type-factor_graph">factor_graph</a></code></dt><dd><p>Helper function to generate the factor graph adjacency map representation from a factor-adjacency list</p></dd></dl><dl><dt class="spec value" id="val-fg_remove_fac"><a href="#val-fg_remove_fac" class="anchor"></a><code><span class="keyword">val</span> fg_remove_fac : <span>(<a href="index.html#type-factor">factor</a> * <a href="../Dataflow_types/index.html#type-cf_state">Dataflow_types.cf_state</a>)</span> <span>&#45;&gt;</span> <a href="index.html#type-factor_graph">factor_graph</a> <span>&#45;&gt;</span> <a href="index.html#type-factor_graph">factor_graph</a></code></dt><dt class="spec value" id="val-fg_remove_var"><a href="#val-fg_remove_var" class="anchor"></a><code><span class="keyword">val</span> fg_remove_var : <a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a> <span>&#45;&gt;</span> <a href="index.html#type-factor_graph">factor_graph</a> <span>&#45;&gt;</span> <a href="index.html#type-factor_graph">factor_graph</a></code></dt><dt class="spec value" id="val-remove_touching"><a href="#val-remove_touching" class="anchor"></a><code><span class="keyword">val</span> remove_touching : <span><a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a> Core_kernel.Set.Poly.t</span> <span>&#45;&gt;</span> <a href="index.html#type-factor_graph">factor_graph</a> <span>&#45;&gt;</span> <a href="index.html#type-factor_graph">factor_graph</a></code></dt><dt class="spec value" id="val-prog_factor_graph"><a href="#val-prog_factor_graph" class="anchor"></a><code><span class="keyword">val</span> prog_factor_graph : <span>?&#8288;exclude_data_facs:bool</span> <span>&#45;&gt;</span> <a href="../../Middle__Program/Typed/index.html#type-t">Middle.Program.Typed.t</a> <span>&#45;&gt;</span> <a href="index.html#type-factor_graph">factor_graph</a></code></dt><dd><p>Build a factor graph from prog.log_prob using dependency analysis</p></dd></dl><dl><dt class="spec value" id="val-fg_reaches"><a href="#val-fg_reaches" class="anchor"></a><code><span class="keyword">val</span> fg_reaches : <span><a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a> Core_kernel.Set.Poly.t</span> <span>&#45;&gt;</span> <span><a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a> Core_kernel.Set.Poly.t</span> <span>&#45;&gt;</span> <a href="index.html#type-factor_graph">factor_graph</a> <span>&#45;&gt;</span> bool</code></dt><dd><p>BFS on 'fg' with initial frontier 'starts' and terminating at any element of 'goals'</p></dd></dl><dl><dt class="spec value" id="val-fg_factor_reaches"><a href="#val-fg_factor_reaches" class="anchor"></a><code><span class="keyword">val</span> fg_factor_reaches : <span>(<a href="index.html#type-factor">factor</a> * <a href="../Dataflow_types/index.html#type-label">Dataflow_types.label</a>)</span> <span>&#45;&gt;</span> <span><a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a> Core_kernel.Set.Poly.t</span> <span>&#45;&gt;</span> <a href="index.html#type-factor_graph">factor_graph</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-fg_factor_is_prior"><a href="#val-fg_factor_is_prior" class="anchor"></a><code><span class="keyword">val</span> fg_factor_is_prior : <a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a> <span>&#45;&gt;</span> <span>(<a href="index.html#type-factor">factor</a> * <a href="../Dataflow_types/index.html#type-label">Dataflow_types.label</a>)</span> <span>&#45;&gt;</span> <span><a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a> Core_kernel.Set.Poly.t</span> <span>&#45;&gt;</span> <a href="index.html#type-factor_graph">factor_graph</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-fg_var_priors"><a href="#val-fg_var_priors" class="anchor"></a><code><span class="keyword">val</span> fg_var_priors : <a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a> <span>&#45;&gt;</span> <span><a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a> Core_kernel.Set.Poly.t</span> <span>&#45;&gt;</span> <a href="index.html#type-factor_graph">factor_graph</a> <span>&#45;&gt;</span> <span><span><span>(<a href="index.html#type-factor">factor</a> * <a href="../Dataflow_types/index.html#type-label">Dataflow_types.label</a>)</span> Core_kernel.Set.Poly.t</span> option</span></code></dt><dd><p>Priors of V are neighbors of V which have no connection to any data except though V So for graph G and each parameter V: G' = G\V; For each neighbor F: Use BFS starting from F in G' and search for any data, if there is none, F is a prior</p></dd></dl><dl><dt class="spec value" id="val-list_priors"><a href="#val-list_priors" class="anchor"></a><code><span class="keyword">val</span> list_priors : <span>?&#8288;factor_graph:<span><a href="index.html#type-factor_graph">factor_graph</a> option</span></span> <span>&#45;&gt;</span> <a href="../../Middle__Program/Typed/index.html#type-t">Middle.Program.Typed.t</a> <span>&#45;&gt;</span> <span><span>(<a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a>, <span><span><span>(<a href="index.html#type-factor">factor</a> * <a href="../Dataflow_types/index.html#type-label">Dataflow_types.label</a>)</span> Core_kernel.Set.Poly.t</span> option</span>)</span> Core_kernel.Map.Poly.t</span></code></dt><dt class="spec value" id="val-string_of_factor"><a href="#val-string_of_factor" class="anchor"></a><code><span class="keyword">val</span> string_of_factor : <a href="index.html#type-factor">factor</a> <span>&#45;&gt;</span> string</code></dt><dt class="spec value" id="val-string_of_vexpr"><a href="#val-string_of_vexpr" class="anchor"></a><code><span class="keyword">val</span> string_of_vexpr : <a href="../Dataflow_types/index.html#type-vexpr">Dataflow_types.vexpr</a> <span>&#45;&gt;</span> string</code></dt><dt class="spec value" id="val-factor_graph_to_dot"><a href="#val-factor_graph_to_dot" class="anchor"></a><code><span class="keyword">val</span> factor_graph_to_dot : <a href="index.html#type-factor_graph">factor_graph</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Utility to print a factor graph to the Graphviz dot language for visualization</p></dd></dl></div></body></html>